<?xml version="1.0" encoding="UTF-8"?>
<!--
  wiring_diagram.svg - GPIO詳細配線図（電気配線）

  役割: Raspberry Pi GPIO ピンヘッダーからセンサー・アクチュエーターへの
        電気的接続を詳細に示す。ピン番号、配線色、抵抗値等を含む。

  関連ファイル:
    - system_overview.svg: 物理配置図（ラック構成、機器配置）

  対象読者: 配線作業者、デバッグ時の確認用
  更新日: 2026-02-06
-->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="sans-serif">
  <defs>
    <marker id="arrowR" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#F44336"/></marker>
    <marker id="arrowK" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#212121"/></marker>
    <marker id="arrowG" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#4CAF50"/></marker>
    <marker id="arrowO" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#FF9800"/></marker>
    <marker id="arrowP" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#9C27B0"/></marker>
    <marker id="arrowB" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#2196F3"/></marker>
    <marker id="arrowD" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#FF5722"/></marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#FFFFFF"/>

  <!-- Title -->
  <text x="600" y="28" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Pi #1 GPIO 配線図 — 制御ノード</text>
  <text x="600" y="46" text-anchor="middle" font-size="11" fill="#888">Raspberry Pi Zero 2W / Pi 3B+</text>

  <!-- ================================================ -->
  <!--  GPIO 40-Pin Header (Center)                     -->
  <!--  Left col (odd): cx=495  Right col (even): cx=575 -->
  <!--  Row n: cy = 95 + (n-1)*21                       -->
  <!-- ================================================ -->
  <g id="gpio-header">
    <rect x="462" y="66" width="146" height="452" rx="6" fill="#2E7D32" stroke="#1B5E20" stroke-width="2"/>
    <text x="535" y="82" text-anchor="middle" font-size="9" fill="#C8E6C9" font-weight="bold">GPIO ピンヘッダ (40pin)</text>

    <!-- Row 1: Pin1=3V3, Pin2=5V  y=95 -->
    <circle cx="495" cy="95" r="6" fill="#F44336"/><circle cx="575" cy="95" r="6" fill="#F44336"/>
    <text x="487" y="98" text-anchor="end" font-size="7" fill="#FFCDD2">1</text><text x="583" y="98" font-size="7" fill="#FFCDD2">2</text>
    <text x="455" y="98" text-anchor="end" font-size="8" fill="#F44336" font-weight="bold">3V3</text>
    <text x="615" y="98" font-size="8" fill="#F44336" font-weight="bold">5V</text>

    <!-- Row 2: Pin3=SDA, Pin4=5V  y=116 -->
    <circle cx="495" cy="116" r="6" fill="#FF9800"/><circle cx="575" cy="116" r="6" fill="#F44336"/>
    <text x="487" y="119" text-anchor="end" font-size="7" fill="#FFE0B2">3</text><text x="583" y="119" font-size="7" fill="#FFCDD2">4</text>
    <text x="455" y="119" text-anchor="end" font-size="8" fill="#FF9800" font-weight="bold">SDA</text>
    <text x="615" y="119" font-size="8" fill="#F44336">5V</text>

    <!-- Row 3: Pin5=SCL, Pin6=GND  y=137 -->
    <circle cx="495" cy="137" r="6" fill="#FF9800"/><circle cx="575" cy="137" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="487" y="140" text-anchor="end" font-size="7" fill="#FFE0B2">5</text><text x="583" y="140" font-size="7" fill="#999">6</text>
    <text x="455" y="140" text-anchor="end" font-size="8" fill="#FF9800" font-weight="bold">SCL</text>
    <text x="615" y="140" font-size="8" fill="#666">GND</text>

    <!-- Row 4: Pin7=GPIO4, Pin8=TX  y=158 -->
    <circle cx="495" cy="158" r="6" fill="#9C27B0"/><circle cx="575" cy="158" r="6" fill="#9E9E9E"/>
    <text x="487" y="161" text-anchor="end" font-size="7" fill="#E1BEE7">7</text><text x="583" y="161" font-size="7" fill="#ccc">8</text>
    <text x="455" y="161" text-anchor="end" font-size="8" fill="#9C27B0" font-weight="bold">GPIO4</text>

    <!-- Row 5: Pin9=GND, Pin10=RX  y=179 -->
    <circle cx="495" cy="179" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="575" cy="179" r="6" fill="#9E9E9E"/>
    <text x="487" y="182" text-anchor="end" font-size="7" fill="#999">9</text><text x="583" y="182" font-size="7" fill="#ccc">10</text>
    <text x="455" y="182" text-anchor="end" font-size="8" fill="#666">GND</text>

    <!-- Row 6: Pin11=GPIO17, Pin12=GPIO18  y=200 -->
    <circle cx="495" cy="200" r="6" fill="#2196F3"/><circle cx="575" cy="200" r="6" fill="#9E9E9E"/>
    <text x="487" y="203" text-anchor="end" font-size="7" fill="#BBDEFB">11</text><text x="583" y="203" font-size="7" fill="#ccc">12</text>
    <text x="455" y="203" text-anchor="end" font-size="8" fill="#2196F3" font-weight="bold">GPIO17</text>

    <!-- Row 7: Pin13=GPIO27, Pin14=GND  y=221 -->
    <circle cx="495" cy="221" r="6" fill="#2196F3"/><circle cx="575" cy="221" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="487" y="224" text-anchor="end" font-size="7" fill="#BBDEFB">13</text><text x="583" y="224" font-size="7" fill="#999">14</text>
    <text x="455" y="224" text-anchor="end" font-size="8" fill="#2196F3" font-weight="bold">GPIO27</text>
    <text x="615" y="224" font-size="8" fill="#666">GND</text>

    <!-- Row 8: Pin15=GPIO22, Pin16=GPIO23  y=242 -->
    <circle cx="495" cy="242" r="6" fill="#4CAF50"/><circle cx="575" cy="242" r="6" fill="#2196F3"/>
    <text x="487" y="245" text-anchor="end" font-size="7" fill="#C8E6C9">15</text><text x="583" y="245" font-size="7" fill="#BBDEFB">16</text>
    <text x="455" y="245" text-anchor="end" font-size="8" fill="#4CAF50" font-weight="bold">GPIO22</text>
    <text x="615" y="245" font-size="8" fill="#2196F3" font-weight="bold">GPIO23</text>

    <!-- Row 9: Pin17=3V3, Pin18=GPIO24  y=263 -->
    <circle cx="495" cy="263" r="6" fill="#F44336"/><circle cx="575" cy="263" r="6" fill="#2196F3"/>
    <text x="487" y="266" text-anchor="end" font-size="7" fill="#FFCDD2">17</text><text x="583" y="266" font-size="7" fill="#BBDEFB">18</text>
    <text x="455" y="266" text-anchor="end" font-size="8" fill="#F44336">3V3</text>
    <text x="615" y="266" font-size="8" fill="#2196F3" font-weight="bold">GPIO24</text>

    <!-- Row 10: Pin19=MOSI, Pin20=GND  y=284 -->
    <circle cx="495" cy="284" r="6" fill="#9E9E9E"/><circle cx="575" cy="284" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="487" y="287" text-anchor="end" font-size="7" fill="#ccc">19</text><text x="583" y="287" font-size="7" fill="#999">20</text>
    <text x="615" y="287" font-size="8" fill="#666">GND</text>

    <!-- Row 11-14: unused/less important pins -->
    <circle cx="495" cy="305" r="6" fill="#9E9E9E"/><circle cx="575" cy="305" r="6" fill="#9E9E9E"/>
    <text x="487" y="308" text-anchor="end" font-size="7" fill="#ccc">21</text><text x="583" y="308" font-size="7" fill="#ccc">22</text>
    <circle cx="495" cy="326" r="6" fill="#9E9E9E"/><circle cx="575" cy="326" r="6" fill="#9E9E9E"/>
    <text x="487" y="329" text-anchor="end" font-size="7" fill="#ccc">23</text><text x="583" y="329" font-size="7" fill="#ccc">24</text>
    <circle cx="495" cy="347" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="575" cy="347" r="6" fill="#9E9E9E"/>
    <text x="487" y="350" text-anchor="end" font-size="7" fill="#999">25</text><text x="583" y="350" font-size="7" fill="#ccc">26</text>
    <text x="455" y="350" text-anchor="end" font-size="8" fill="#666">GND</text>
    <circle cx="495" cy="368" r="6" fill="#9E9E9E"/><circle cx="575" cy="368" r="6" fill="#9E9E9E"/>
    <text x="487" y="371" text-anchor="end" font-size="7" fill="#ccc">27</text><text x="583" y="371" font-size="7" fill="#ccc">28</text>

    <!-- Row 15: Pin29=GPIO5, Pin30=GND  y=389 -->
    <circle cx="495" cy="389" r="6" fill="#2196F3"/><circle cx="575" cy="389" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="487" y="392" text-anchor="end" font-size="7" fill="#BBDEFB">29</text><text x="583" y="392" font-size="7" fill="#999">30</text>
    <text x="455" y="392" text-anchor="end" font-size="8" fill="#2196F3" font-weight="bold">GPIO5</text>
    <text x="615" y="392" font-size="8" fill="#666">GND</text>

    <!-- Row 16: Pin31=GPIO6, Pin32=GPIO12  y=410 -->
    <circle cx="495" cy="410" r="6" fill="#2196F3"/><circle cx="575" cy="410" r="6" fill="#2196F3"/>
    <text x="487" y="413" text-anchor="end" font-size="7" fill="#BBDEFB">31</text><text x="583" y="413" font-size="7" fill="#BBDEFB">32</text>
    <text x="455" y="413" text-anchor="end" font-size="8" fill="#2196F3" font-weight="bold">GPIO6</text>
    <text x="615" y="413" font-size="8" fill="#2196F3" font-weight="bold">GPIO12</text>

    <!-- Row 17: Pin33=GPIO13, Pin34=GND  y=431 -->
    <circle cx="495" cy="431" r="6" fill="#2196F3"/><circle cx="575" cy="431" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="487" y="434" text-anchor="end" font-size="7" fill="#BBDEFB">33</text><text x="583" y="434" font-size="7" fill="#999">34</text>
    <text x="455" y="434" text-anchor="end" font-size="8" fill="#2196F3" font-weight="bold">GPIO13</text>
    <text x="615" y="434" font-size="8" fill="#666">GND</text>

    <!-- Row 18-20: unused -->
    <circle cx="495" cy="452" r="6" fill="#9E9E9E"/><circle cx="575" cy="452" r="6" fill="#9E9E9E"/>
    <text x="487" y="455" text-anchor="end" font-size="7" fill="#ccc">35</text><text x="583" y="455" font-size="7" fill="#ccc">36</text>
    <circle cx="495" cy="473" r="6" fill="#9E9E9E"/><circle cx="575" cy="473" r="6" fill="#9E9E9E"/>
    <text x="487" y="476" text-anchor="end" font-size="7" fill="#ccc">37</text><text x="583" y="476" font-size="7" fill="#ccc">38</text>
    <circle cx="495" cy="494" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="575" cy="494" r="6" fill="#9E9E9E"/>
    <text x="487" y="497" text-anchor="end" font-size="7" fill="#999">39</text><text x="583" y="497" font-size="7" fill="#ccc">40</text>
    <text x="455" y="497" text-anchor="end" font-size="8" fill="#666">GND</text>
  </g>

  <!-- ================================================ -->
  <!--  LEFT SIDE — センサー系                           -->
  <!-- ================================================ -->

  <!-- DS18B20 水温センサー -->
  <g id="ds18b20">
    <rect x="30" y="95" width="220" height="105" rx="6" fill="#F3E5F9" stroke="#9C27B0" stroke-width="1.5"/>
    <text x="140" y="112" text-anchor="middle" font-size="11" font-weight="bold" fill="#6A1B9A">DS18B20</text>
    <text x="140" y="126" text-anchor="middle" font-size="9" fill="#9C27B0">水温センサー（1-Wire）</text>
    <!-- Pin labels inside box -->
    <text x="240" y="148" text-anchor="end" font-size="8" fill="#F44336">VCC (3.3V) ●</text>
    <text x="240" y="164" text-anchor="end" font-size="8" fill="#9C27B0">DATA ●</text>
    <text x="240" y="180" text-anchor="end" font-size="8" fill="#212121">GND ●</text>

    <!-- 4.7kΩ Pullup Resistor (between DATA and VCC) -->
    <line x1="300" y1="148" x2="300" y2="152" stroke="#9C27B0" stroke-width="1.5"/>
    <path d="M300,152 l-5,4 l10,4 l-10,4 l10,4 l-10,4 l5,4" fill="none" stroke="#9C27B0" stroke-width="1.5"/>
    <line x1="300" y1="176" x2="300" y2="180" stroke="#9C27B0" stroke-width="1.5"/>
    <text x="320" y="168" font-size="7" fill="#9C27B0">4.7kΩ</text>
    <!-- Horizontal tap from resistor mid to VCC line -->
    <line x1="250" y1="148" x2="300" y2="148" stroke="#F44336" stroke-width="1.5"/>
    <!-- Horizontal tap from resistor bottom to DATA line -->
    <circle cx="300" cy="164" r="2" fill="#9C27B0"/>
  </g>

  <!-- DS18B20 Wires -->
  <g id="ds18b20-wires">
    <!-- VCC: Pin1 3V3 (y=95) → left → down → DS18B20 VCC -->
    <polyline points="462,95 380,95 380,148 250,148" fill="none" stroke="#F44336" stroke-width="2"/>
    <!-- DATA: Pin7 GPIO4 (y=158) → left → DS18B20 DATA → pullup junction -->
    <polyline points="462,158 350,158 350,164 300,164" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <polyline points="300,164 250,164" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <!-- GND: Pin9 (y=179) → left → DS18B20 GND -->
    <polyline points="462,179 370,179 370,192 250,192" fill="none" stroke="#212121" stroke-width="2"/>
  </g>

  <!-- ADS1115 ADC (Phase 5: オプション) -->
  <g id="ads1115" opacity="0.5">
    <rect x="30" y="240" width="220" height="140" rx="6" fill="#FFF3E0" stroke="#FF9800" stroke-width="1.5" stroke-dasharray="6,3"/>
    <text x="140" y="258" text-anchor="middle" font-size="11" font-weight="bold" fill="#E65100">ADS1115</text>
    <text x="140" y="272" text-anchor="middle" font-size="9" fill="#FF9800">16bit ADC モジュール</text>
    <text x="140" y="286" text-anchor="middle" font-size="8" fill="#9E9E9E">【Phase 5: オプション】</text>
    <!-- Right side pins (from Pi) -->
    <text x="240" y="304" text-anchor="end" font-size="8" fill="#F44336">VDD (3.3V) ●</text>
    <text x="240" y="320" text-anchor="end" font-size="8" fill="#FF9800">SDA ●</text>
    <text x="240" y="336" text-anchor="end" font-size="8" fill="#FF9800">SCL ●</text>
    <text x="240" y="352" text-anchor="end" font-size="8" fill="#212121">GND ●</text>
    <!-- Left side pins (to sensors) -->
    <text x="40" y="320" font-size="8" fill="#4CAF50">● A0 → pH</text>
    <text x="40" y="340" font-size="8" fill="#4CAF50">● A1 → EC</text>
  </g>

  <!-- ADS1115 Wires -->
  <g id="ads1115-wires">
    <!-- VDD: from 3V3 bus (x=380, shared with DS18B20 VCC) -->
    <polyline points="380,148 380,289 250,289" fill="none" stroke="#F44336" stroke-width="1.5" stroke-dasharray="4,2"/>
    <!-- SDA: Pin3 (y=116) → down → ADS1115 SDA -->
    <polyline points="462,116 395,116 395,305 250,305" fill="none" stroke="#FF9800" stroke-width="2"/>
    <!-- SCL: Pin5 (y=137) → down → ADS1115 SCL -->
    <polyline points="462,137 405,137 405,321 250,321" fill="none" stroke="#FF9800" stroke-width="2"/>
    <!-- GND: from GND bus -->
    <polyline points="370,192 370,337 250,337" fill="none" stroke="#212121" stroke-width="1.5" stroke-dasharray="4,2"/>
  </g>

  <!-- pH Sensor (Phase 5: オプション) -->
  <g id="ph-sensor" opacity="0.5">
    <rect x="30" y="400" width="200" height="38" rx="4" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1" stroke-dasharray="4,2"/>
    <text x="130" y="412" text-anchor="middle" font-size="9" font-weight="bold" fill="#2E7D32">pH センサー</text>
    <text x="130" y="424" text-anchor="middle" font-size="7" fill="#4CAF50">DFRobot SEN0161-V2</text>
    <text x="130" y="436" text-anchor="middle" font-size="6" fill="#9E9E9E">【Phase 5: オプション】</text>
    <!-- Wire from ADS1115 A0 -->
    <polyline points="40,320 20,320 20,419 30,419" fill="none" stroke="#4CAF50" stroke-width="1.5" stroke-dasharray="4,2"/>
  </g>

  <!-- EC Sensor (Phase 5: オプション) -->
  <g id="ec-sensor" opacity="0.5">
    <rect x="30" y="450" width="200" height="38" rx="4" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1" stroke-dasharray="4,2"/>
    <text x="130" y="462" text-anchor="middle" font-size="9" font-weight="bold" fill="#2E7D32">EC センサー</text>
    <text x="130" y="474" text-anchor="middle" font-size="7" fill="#4CAF50">DFRobot SEN0244</text>
    <text x="130" y="486" text-anchor="middle" font-size="6" fill="#9E9E9E">【Phase 5: オプション】</text>
    <!-- Wire from ADS1115 A1 -->
    <polyline points="40,340 10,340 10,469 30,469" fill="none" stroke="#4CAF50" stroke-width="1.5" stroke-dasharray="4,2"/>
  </g>

  <!-- Float Switch 水位センサー -->
  <g id="float-switch">
    <rect x="30" y="505" width="220" height="55" rx="6" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1.5"/>
    <text x="140" y="524" text-anchor="middle" font-size="11" font-weight="bold" fill="#2E7D32">フロートスイッチ</text>
    <text x="140" y="540" text-anchor="middle" font-size="9" fill="#4CAF50">水位センサー</text>
    <text x="240" y="530" text-anchor="end" font-size="8" fill="#4CAF50">SIG ●</text>

    <!-- 10kΩ Pullup Resistor -->
    <line x1="310" y1="242" x2="310" y2="246" stroke="#4CAF50" stroke-width="1.5"/>
    <path d="M310,246 l-5,4 l10,4 l-10,4 l10,4 l-10,4 l5,4" fill="none" stroke="#4CAF50" stroke-width="1.5"/>
    <line x1="310" y1="270" x2="310" y2="274" stroke="#4CAF50" stroke-width="1.5"/>
    <text x="328" y="262" font-size="7" fill="#4CAF50">10kΩ</text>
    <!-- Pullup to 3V3 -->
    <line x1="310" y1="242" x2="340" y2="242" stroke="#F44336" stroke-width="1"/>
    <line x1="340" y1="95" x2="340" y2="242" stroke="#F44336" stroke-width="1" stroke-dasharray="3,2"/>
  </g>

  <!-- Float Switch Wire -->
  <g id="float-wires">
    <!-- GPIO22 Pin15 (y=242) → left → down → float switch -->
    <polyline points="462,242 310,242" fill="none" stroke="#4CAF50" stroke-width="2"/>
    <polyline points="310,274 310,530 250,530" fill="none" stroke="#4CAF50" stroke-width="2"/>
    <circle cx="310" cy="242" r="2.5" fill="#4CAF50"/>
  </g>

  <!-- ================================================ -->
  <!--  RIGHT SIDE — アクチュエーター系                    -->
  <!-- ================================================ -->

  <!-- 4ch Relay Module -->
  <g id="relay-module">
    <rect x="700" y="100" width="230" height="210" rx="6" fill="#E3F2FD" stroke="#2196F3" stroke-width="1.5"/>
    <text x="815" y="118" text-anchor="middle" font-size="11" font-weight="bold" fill="#1565C0">4ch リレーモジュール</text>
    <text x="815" y="132" text-anchor="middle" font-size="8" fill="#2196F3">5V 駆動 / 光カプラ絶縁</text>
    <!-- Input pins (left side) -->
    <text x="710" y="162" font-size="8" fill="#2196F3">● IN1</text>
    <text x="710" y="192" font-size="8" fill="#2196F3">● IN2</text>
    <text x="710" y="222" font-size="8" fill="#2196F3">● IN3</text>
    <text x="710" y="252" font-size="8" fill="#2196F3">● IN4</text>
    <text x="710" y="280" font-size="8" fill="#F44336">● VCC</text>
    <text x="710" y="296" font-size="8" fill="#212121">● GND</text>

    <!-- Coil symbols inside relay -->
    <rect x="775" y="148" width="40" height="16" rx="2" fill="none" stroke="#1565C0" stroke-width="1"/>
    <path d="M780,156 q5,-5 10,0 q5,5 10,0 q5,-5 10,0" fill="none" stroke="#1565C0" stroke-width="1"/>
    <rect x="775" y="178" width="40" height="16" rx="2" fill="none" stroke="#1565C0" stroke-width="1"/>
    <path d="M780,186 q5,-5 10,0 q5,5 10,0 q5,-5 10,0" fill="none" stroke="#1565C0" stroke-width="1"/>
    <rect x="775" y="208" width="40" height="16" rx="2" fill="none" stroke="#1565C0" stroke-width="1"/>
    <path d="M780,216 q5,-5 10,0 q5,5 10,0 q5,-5 10,0" fill="none" stroke="#1565C0" stroke-width="1"/>
    <rect x="775" y="238" width="40" height="16" rx="2" fill="none" stroke="#1565C0" stroke-width="1"/>
    <path d="M780,246 q5,-5 10,0 q5,5 10,0 q5,-5 10,0" fill="none" stroke="#1565C0" stroke-width="1"/>

    <!-- Output labels (right side) -->
    <text x="920" y="162" text-anchor="end" font-size="8" fill="#FF5722">NO1 ●</text>
    <text x="920" y="192" text-anchor="end" font-size="8" fill="#FF5722">NO2 ●</text>
    <text x="920" y="222" text-anchor="end" font-size="8" fill="#FF5722">NO3 ●</text>
    <text x="920" y="252" text-anchor="end" font-size="8" fill="#FF5722">NO4 ●</text>
  </g>

  <!-- Relay GPIO Wires (from header right edge) -->
  <g id="relay-wires">
    <!-- GPIO17 Pin11 (y=200) → Relay IN1 (y=159) -->
    <polyline points="608,200 660,200 660,159 700,159" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- GPIO27 Pin13 (y=221) → Relay IN2 (y=189) -->
    <polyline points="608,221 650,221 650,189 700,189" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- GPIO23 Pin16 (y=242) → Relay IN3 (y=219) -->
    <polyline points="608,242 640,242 640,219 700,219" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- GPIO24 Pin18 (y=263) → Relay IN4 (y=249) -->
    <polyline points="608,263 640,263 640,249 700,249" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- 5V: Pin2 (y=95) → Relay VCC -->
    <polyline points="608,95 670,95 670,277 700,277" fill="none" stroke="#F44336" stroke-width="1.5"/>
    <!-- GND: Pin6 (y=137) → Relay GND -->
    <polyline points="608,137 680,137 680,293 700,293" fill="none" stroke="#212121" stroke-width="1.5"/>
  </g>

  <!-- Output Devices (right of relay) -->
  <g id="relay-outputs">
    <!-- 循環ポンプ -->
    <rect x="960" y="143" width="170" height="30" rx="4" fill="#FBE9E7" stroke="#FF5722" stroke-width="1"/>
    <text x="1045" y="163" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">循環ポンプ (DC12V)</text>
    <line x1="930" y1="159" x2="960" y2="158" stroke="#FF5722" stroke-width="2"/>

    <!-- エアポンプ -->
    <rect x="960" y="178" width="170" height="30" rx="4" fill="#FBE9E7" stroke="#FF5722" stroke-width="1"/>
    <text x="1045" y="198" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">エアポンプ</text>
    <line x1="930" y1="189" x2="960" y2="193" stroke="#FF5722" stroke-width="2"/>

    <!-- UV殺菌灯 -->
    <rect x="960" y="213" width="170" height="30" rx="4" fill="#FBE9E7" stroke="#FF5722" stroke-width="1"/>
    <text x="1045" y="233" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">UV 殺菌灯</text>
    <line x1="930" y1="219" x2="960" y2="228" stroke="#FF5722" stroke-width="2"/>

    <!-- 予備 -->
    <rect x="960" y="248" width="170" height="30" rx="4" fill="#FAFAFA" stroke="#9E9E9E" stroke-width="1" stroke-dasharray="4,2"/>
    <text x="1045" y="268" text-anchor="middle" font-size="9" fill="#9E9E9E">予備（未使用）</text>
    <line x1="930" y1="249" x2="960" y2="263" stroke="#9E9E9E" stroke-width="1.5" stroke-dasharray="3,2"/>
  </g>

  <!-- L293D Motor Driver -->
  <g id="l293d">
    <rect x="700" y="345" width="230" height="160" rx="6" fill="#E3F2FD" stroke="#2196F3" stroke-width="1.5"/>
    <text x="815" y="363" text-anchor="middle" font-size="11" font-weight="bold" fill="#1565C0">L293D</text>
    <text x="815" y="377" text-anchor="middle" font-size="8" fill="#2196F3">モータードライバー（Hブリッジ）</text>
    <!-- Input pins (left) -->
    <text x="710" y="400" font-size="8" fill="#2196F3">● 1,2EN</text>
    <text x="710" y="416" font-size="8" fill="#2196F3">● 1A</text>
    <text x="710" y="432" font-size="8" fill="#2196F3">● 3,4EN</text>
    <text x="710" y="448" font-size="8" fill="#2196F3">● 3A</text>
    <text x="710" y="468" font-size="8" fill="#F44336">● VCC1 (5V)</text>
    <text x="710" y="484" font-size="8" fill="#FF5722">● VCC2 (12V)</text>
    <text x="710" y="498" font-size="8" fill="#212121">● GND</text>
    <!-- Output pins (right) -->
    <text x="920" y="408" text-anchor="end" font-size="8" fill="#FF5722">1Y ●</text>
    <text x="920" y="440" text-anchor="end" font-size="8" fill="#FF5722">3Y ●</text>
  </g>

  <!-- L293D GPIO Wires -->
  <g id="l293d-wires">
    <!-- GPIO5 Pin29 (y=389) → 1,2EN -->
    <polyline points="608,389 650,389 650,397 700,397" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- GPIO6 Pin31 (y=410) → 1A -->
    <polyline points="608,410 645,410 645,413 700,413" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- GPIO12 Pin32 (y=410) → 3,4EN -->
    <polyline points="608,410 655,410 655,429 700,429" fill="none" stroke="#2196F3" stroke-width="1.5" stroke-dasharray="5,2"/>
    <!-- GPIO13 Pin33 (y=431) → 3A -->
    <polyline points="608,431 660,431 660,445 700,445" fill="none" stroke="#2196F3" stroke-width="2"/>
    <!-- 5V to VCC1 -->
    <polyline points="670,95 670,465 700,465" fill="none" stroke="#F44336" stroke-width="1" stroke-dasharray="3,2"/>
    <!-- GND -->
    <polyline points="680,293 680,495 700,495" fill="none" stroke="#212121" stroke-width="1" stroke-dasharray="3,2"/>
  </g>

  <!-- Peristaltic Pumps (Phase 5: オプション) -->
  <g id="peristaltic-pumps" opacity="0.5">
    <rect x="960" y="390" width="170" height="30" rx="4" fill="#FBE9E7" stroke="#FF5722" stroke-width="1" stroke-dasharray="4,2"/>
    <text x="1045" y="405" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">ペリスタルティック #1</text>
    <text x="1045" y="417" text-anchor="middle" font-size="7" fill="#FF5722">pH調整液【Phase 5: オプション】</text>
    <line x1="930" y1="405" x2="960" y2="405" stroke="#FF5722" stroke-width="2" stroke-dasharray="4,2"/>

    <rect x="960" y="430" width="170" height="30" rx="4" fill="#FBE9E7" stroke="#FF5722" stroke-width="1" stroke-dasharray="4,2"/>
    <text x="1045" y="445" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">ペリスタルティック #2</text>
    <text x="1045" y="457" text-anchor="middle" font-size="7" fill="#FF5722">栄養液【Phase 5: オプション】</text>
    <line x1="930" y1="437" x2="960" y2="445" stroke="#FF5722" stroke-width="2" stroke-dasharray="4,2"/>
  </g>

  <!-- ================================================ -->
  <!--  BOTTOM — 電源部                                  -->
  <!-- ================================================ -->
  <g id="power-section">
    <rect x="380" y="590" width="310" height="110" rx="6" fill="#FFF8E1" stroke="#FF5722" stroke-width="1.5"/>
    <text x="535" y="610" text-anchor="middle" font-size="12" font-weight="bold" fill="#BF360C">電源部</text>

    <!-- AC-DC PSU -->
    <rect x="400" y="620" width="120" height="35" rx="3" fill="#FBE9E7" stroke="#FF5722" stroke-width="1"/>
    <text x="460" y="638" text-anchor="middle" font-size="9" font-weight="bold" fill="#BF360C">AC-DC 電源</text>
    <text x="460" y="650" text-anchor="middle" font-size="8" fill="#FF5722">12V / 5A</text>

    <!-- 5V regulator label -->
    <rect x="550" y="620" width="120" height="35" rx="3" fill="#FFEBEE" stroke="#F44336" stroke-width="1"/>
    <text x="610" y="638" text-anchor="middle" font-size="9" font-weight="bold" fill="#C62828">Pi 電源</text>
    <text x="610" y="650" text-anchor="middle" font-size="8" fill="#F44336">5V / 2.5A (USB)</text>

    <!-- Labels -->
    <text x="460" y="685" text-anchor="middle" font-size="8" fill="#FF5722">12V → リレー経由で各ポンプ・UV灯へ</text>
    <text x="535" y="695" text-anchor="middle" font-size="7" fill="#888">※ Pi の 3.3V/5V ピンからセンサー・モジュールへ給電</text>

    <!-- 12V wire up to relay area -->
    <line x1="460" y1="620" x2="460" y2="570" stroke="#FF5722" stroke-width="2" stroke-dasharray="6,3"/>
    <text x="470" y="580" font-size="7" fill="#FF5722">12V</text>
  </g>

  <!-- 12V Bus to relay outputs -->
  <line x1="460" y1="570" x2="460" y2="540" stroke="#FF5722" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polyline points="460,540 1150,540 1150,143" fill="none" stroke="#FF5722" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="800" y="535" font-size="7" fill="#FF5722">12V 電源バス → リレーNO端子経由</text>

  <!-- ================================================ -->
  <!--  LEGEND — 凡例                                    -->
  <!-- ================================================ -->
  <g id="legend">
    <rect x="20" y="640" width="220" height="245" rx="6" fill="#FAFAFA" stroke="#E0E0E0" stroke-width="1"/>
    <text x="130" y="660" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">凡例（配線色）</text>

    <line x1="35" y1="680" x2="75" y2="680" stroke="#F44336" stroke-width="3"/>
    <text x="85" y="684" font-size="9" fill="#333">電源線 VCC (3.3V/5V)</text>

    <line x1="35" y1="702" x2="75" y2="702" stroke="#212121" stroke-width="3"/>
    <text x="85" y="706" font-size="9" fill="#333">GND線</text>

    <line x1="35" y1="724" x2="75" y2="724" stroke="#4CAF50" stroke-width="3"/>
    <text x="85" y="728" font-size="9" fill="#333">センサーデータ線</text>

    <line x1="35" y1="746" x2="75" y2="746" stroke="#FF9800" stroke-width="3"/>
    <text x="85" y="750" font-size="9" fill="#333">I2C (SDA/SCL)</text>

    <line x1="35" y1="768" x2="75" y2="768" stroke="#9C27B0" stroke-width="3"/>
    <text x="85" y="772" font-size="9" fill="#333">1-Wire (DS18B20)</text>

    <line x1="35" y1="790" x2="75" y2="790" stroke="#2196F3" stroke-width="3"/>
    <text x="85" y="794" font-size="9" fill="#333">GPIO制御線（リレー/L293D）</text>

    <line x1="35" y1="812" x2="75" y2="812" stroke="#FF5722" stroke-width="3"/>
    <text x="85" y="816" font-size="9" fill="#333">12V 電源系</text>

    <!-- Circuit symbol legend -->
    <line x1="35" y1="840" x2="75" y2="840" stroke="#999" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="85" y="844" font-size="9" fill="#333">電源バス（共有線）</text>

    <path d="M35,862 l5,-6 l8,12 l8,-12 l8,12 l5,-6" fill="none" stroke="#666" stroke-width="1.5"/>
    <text x="85" y="866" font-size="9" fill="#333">抵抗</text>
  </g>

  <!-- ================================================ -->
  <!--  SECTION LABELS                                  -->
  <!-- ================================================ -->
  <text x="140" y="78" text-anchor="middle" font-size="12" font-weight="bold" fill="#6A1B9A">◀ センサー系</text>
  <text x="1045" y="88" text-anchor="middle" font-size="12" font-weight="bold" fill="#1565C0">アクチュエーター系 ▶</text>

  <!-- GPIO usage summary -->
  <g id="pin-summary">
    <rect x="700" y="530" width="480" height="85" rx="4" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
    <text x="940" y="548" text-anchor="middle" font-size="10" font-weight="bold" fill="#333">GPIO 使用一覧</text>
    <text x="710" y="565" font-size="8" fill="#9C27B0">GPIO4: DS18B20 (1-Wire)</text>
    <text x="710" y="578" font-size="8" fill="#FF9800">GPIO2(SDA), GPIO3(SCL): ADS1115 (I2C)</text>
    <text x="710" y="591" font-size="8" fill="#4CAF50">GPIO22: フロートスイッチ</text>
    <text x="710" y="604" font-size="8" fill="#2196F3">GPIO17,27,23,24: 4ch リレー (CH1-4)</text>
    <text x="1000" y="578" font-size="8" fill="#2196F3">GPIO5,6: L293D (ポンプ1)</text>
    <text x="1000" y="591" font-size="8" fill="#2196F3">GPIO12,13: L293D (ポンプ2)</text>
    <text x="1000" y="604" font-size="8" fill="#888">使用GPIO: 12本 / 空き: 14本</text>
  </g>

</svg>
