<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 800" font-family="sans-serif">
  <defs>
    <marker id="arrowR" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#F44336"/></marker>
    <marker id="arrowK" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#212121"/></marker>
    <marker id="arrowY" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#FFC107"/></marker>
    <marker id="arrowP" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto"><path d="M0 0L10 5L0 10z" fill="#9C27B0"/></marker>
  </defs>

  <!-- Background -->
  <rect width="1100" height="800" fill="#FFFFFF"/>

  <!-- Title -->
  <text x="550" y="28" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Phase 2 ブレッドボード配線図 — センサーノード</text>
  <text x="550" y="46" text-anchor="middle" font-size="11" fill="#888">Raspberry Pi 4 Model B + DS18B20 + DHT22 + フロートスイッチ</text>

  <!-- ================================================ -->
  <!--  BREADBOARD (フルサイズ)                          -->
  <!-- ================================================ -->
  <g id="breadboard">
    <rect x="40" y="250" width="580" height="250" rx="4" fill="#F5F5DC" stroke="#8B8B7A" stroke-width="2"/>
    <text x="330" y="270" text-anchor="middle" font-size="10" font-weight="bold" fill="#666">フルサイズ ブレッドボード</text>

    <!-- Power Rails Top (+/-) -->
    <rect x="50" y="280" width="560" height="24" rx="2" fill="#FFF" stroke="#CCC" stroke-width="1"/>
    <line x1="50" y1="288" x2="610" y2="288" stroke="#F44336" stroke-width="1.5"/>
    <text x="55" y="290" font-size="8" fill="#F44336">+</text>
    <line x1="50" y1="300" x2="610" y2="300" stroke="#2196F3" stroke-width="1.5"/>
    <text x="55" y="302" font-size="8" fill="#2196F3">-</text>

    <!-- Main Area (holes) -->
    <rect x="50" y="310" width="560" height="140" rx="2" fill="#FFF" stroke="#CCC" stroke-width="1"/>
    <!-- Center gap -->
    <line x1="50" y1="380" x2="610" y2="380" stroke="#F5F5DC" stroke-width="6"/>

    <!-- Power Rails Bottom (+/-) -->
    <rect x="50" y="456" width="560" height="24" rx="2" fill="#FFF" stroke="#CCC" stroke-width="1"/>
    <line x1="50" y1="464" x2="610" y2="464" stroke="#F44336" stroke-width="1.5"/>
    <text x="55" y="466" font-size="8" fill="#F44336">+</text>
    <line x1="50" y1="476" x2="610" y2="476" stroke="#2196F3" stroke-width="1.5"/>
    <text x="55" y="478" font-size="8" fill="#2196F3">-</text>
  </g>

  <!-- ================================================ -->
  <!--  Raspberry Pi 4 Model B (right side)            -->
  <!-- ================================================ -->
  <g id="raspberry-pi">
    <rect x="700" y="100" width="380" height="480" rx="8" fill="#2E7D32" stroke="#1B5E20" stroke-width="2"/>
    <text x="890" y="125" text-anchor="middle" font-size="14" font-weight="bold" fill="#C8E6C9">Raspberry Pi 4 Model B</text>

    <!-- GPIO Header -->
    <rect x="720" y="150" width="146" height="410" rx="6" fill="#1B5E20" stroke="#0D5302" stroke-width="1"/>
    <text x="793" y="166" text-anchor="middle" font-size="9" fill="#A5D6A7" font-weight="bold">GPIO ピンヘッダ (40pin)</text>

    <!-- Row 1: Pin1=3V3, Pin2=5V  y=185 -->
    <circle cx="753" cy="185" r="6" fill="#F44336"/><circle cx="833" cy="185" r="6" fill="#9E9E9E"/>
    <text x="745" y="188" text-anchor="end" font-size="7" fill="#FFCDD2">1</text><text x="841" y="188" font-size="7" fill="#ccc">2</text>
    <text x="880" y="188" font-size="8" fill="#F44336" font-weight="bold">3.3V</text>

    <!-- Row 2: Pin3=SDA (GPIO2), Pin4=5V  y=206 -->
    <circle cx="753" cy="206" r="6" fill="#9E9E9E"/><circle cx="833" cy="206" r="6" fill="#9E9E9E"/>
    <text x="745" y="209" text-anchor="end" font-size="7" fill="#ccc">3</text><text x="841" y="209" font-size="7" fill="#ccc">4</text>

    <!-- Row 3: Pin5=SCL (GPIO3), Pin6=GND  y=227 -->
    <circle cx="753" cy="227" r="6" fill="#9E9E9E"/><circle cx="833" cy="227" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="745" y="230" text-anchor="end" font-size="7" fill="#ccc">5</text><text x="841" y="230" font-size="7" fill="#999">6</text>
    <text x="880" y="230" font-size="8" fill="#666" font-weight="bold">GND</text>

    <!-- Row 4: Pin7=GPIO4, Pin8=TX  y=248 -->
    <circle cx="753" cy="248" r="6" fill="#FFC107"/><circle cx="833" cy="248" r="6" fill="#9E9E9E"/>
    <text x="745" y="251" text-anchor="end" font-size="7" fill="#FFF9C4">7</text><text x="841" y="251" font-size="7" fill="#ccc">8</text>
    <text x="880" y="251" font-size="8" fill="#FFC107" font-weight="bold">GPIO4 (DS18B20)</text>

    <!-- Row 5: Pin9=GND, Pin10=RX  y=269 -->
    <circle cx="753" cy="269" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="833" cy="269" r="6" fill="#9E9E9E"/>
    <text x="745" y="272" text-anchor="end" font-size="7" fill="#999">9</text><text x="841" y="272" font-size="7" fill="#ccc">10</text>
    <text x="880" y="272" font-size="8" fill="#666">GND</text>

    <!-- Row 6: Pin11=GPIO17, Pin12=GPIO18  y=290 -->
    <circle cx="753" cy="290" r="6" fill="#FFC107"/><circle cx="833" cy="290" r="6" fill="#9E9E9E"/>
    <text x="745" y="293" text-anchor="end" font-size="7" fill="#FFF9C4">11</text><text x="841" y="293" font-size="7" fill="#ccc">12</text>
    <text x="880" y="293" font-size="8" fill="#FFC107" font-weight="bold">GPIO17 (DHT22)</text>

    <!-- Row 7: Pin13=GPIO27, Pin14=GND  y=311 -->
    <circle cx="753" cy="311" r="6" fill="#9E9E9E"/><circle cx="833" cy="311" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="745" y="314" text-anchor="end" font-size="7" fill="#ccc">13</text><text x="841" y="314" font-size="7" fill="#999">14</text>
    <text x="1020" y="314" font-size="8" fill="#666">GND</text>

    <!-- Row 8: Pin15=GPIO22, Pin16=GPIO23  y=332 -->
    <circle cx="753" cy="332" r="6" fill="#9C27B0"/><circle cx="833" cy="332" r="6" fill="#9E9E9E"/>
    <text x="745" y="335" text-anchor="end" font-size="7" fill="#E1BEE7">15</text><text x="841" y="335" font-size="7" fill="#ccc">16</text>
    <text x="880" y="335" font-size="8" fill="#9C27B0" font-weight="bold">GPIO22 (フロートSW)</text>

    <!-- Row 9-20: remaining pins (simplified) -->
    <circle cx="753" cy="353" r="6" fill="#9E9E9E"/><circle cx="833" cy="353" r="6" fill="#9E9E9E"/>
    <text x="745" y="356" text-anchor="end" font-size="7" fill="#ccc">17</text><text x="841" y="356" font-size="7" fill="#ccc">18</text>
    <circle cx="753" cy="374" r="6" fill="#9E9E9E"/><circle cx="833" cy="374" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="745" y="377" text-anchor="end" font-size="7" fill="#ccc">19</text><text x="841" y="377" font-size="7" fill="#999">20</text>
    <circle cx="753" cy="395" r="6" fill="#9E9E9E"/><circle cx="833" cy="395" r="6" fill="#9E9E9E"/>
    <text x="745" y="398" text-anchor="end" font-size="7" fill="#ccc">21</text><text x="841" y="398" font-size="7" fill="#ccc">22</text>
    <circle cx="753" cy="416" r="6" fill="#9E9E9E"/><circle cx="833" cy="416" r="6" fill="#9E9E9E"/>
    <text x="745" y="419" text-anchor="end" font-size="7" fill="#ccc">23</text><text x="841" y="419" font-size="7" fill="#ccc">24</text>
    <circle cx="753" cy="437" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="833" cy="437" r="6" fill="#9E9E9E"/>
    <text x="745" y="440" text-anchor="end" font-size="7" fill="#999">25</text><text x="841" y="440" font-size="7" fill="#ccc">26</text>
    <circle cx="753" cy="458" r="6" fill="#9E9E9E"/><circle cx="833" cy="458" r="6" fill="#9E9E9E"/>
    <text x="745" y="461" text-anchor="end" font-size="7" fill="#ccc">27</text><text x="841" y="461" font-size="7" fill="#ccc">28</text>
    <circle cx="753" cy="479" r="6" fill="#9E9E9E"/><circle cx="833" cy="479" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="745" y="482" text-anchor="end" font-size="7" fill="#ccc">29</text><text x="841" y="482" font-size="7" fill="#999">30</text>
    <circle cx="753" cy="500" r="6" fill="#9E9E9E"/><circle cx="833" cy="500" r="6" fill="#9E9E9E"/>
    <text x="745" y="503" text-anchor="end" font-size="7" fill="#ccc">31</text><text x="841" y="503" font-size="7" fill="#ccc">32</text>
    <circle cx="753" cy="521" r="6" fill="#9E9E9E"/><circle cx="833" cy="521" r="6" fill="#212121" stroke="#666" stroke-width="1"/>
    <text x="745" y="524" text-anchor="end" font-size="7" fill="#ccc">33</text><text x="841" y="524" font-size="7" fill="#999">34</text>
    <circle cx="753" cy="542" r="6" fill="#212121" stroke="#666" stroke-width="1"/><circle cx="833" cy="542" r="6" fill="#9E9E9E"/>
    <text x="745" y="545" text-anchor="end" font-size="7" fill="#999">39</text><text x="841" y="545" font-size="7" fill="#ccc">40</text>
    <text x="880" y="545" font-size="8" fill="#666">GND</text>
  </g>

  <!-- ================================================ -->
  <!--  DS18B20 Sensor (on breadboard - Phase 1継続)    -->
  <!-- ================================================ -->
  <g id="ds18b20">
    <rect x="80" y="325" width="120" height="100" rx="4" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2"/>
    <text x="140" y="345" text-anchor="middle" font-size="11" font-weight="bold" fill="#6A1B9A">DS18B20</text>
    <text x="140" y="360" text-anchor="middle" font-size="9" fill="#9C27B0">水温センサー</text>
    <text x="140" y="375" text-anchor="middle" font-size="8" fill="#888">(Phase 1継続)</text>

    <!-- Pins -->
    <text x="90" y="400" font-size="8" fill="#212121">GND</text>
    <text x="90" y="415" font-size="8" fill="#FFC107">DATA</text>
    <text x="180" y="400" text-anchor="end" font-size="8" fill="#F44336">VCC</text>

    <!-- 4.7kΩ Pullup Resistor Symbol -->
    <line x1="165" y1="430" x2="165" y2="436" stroke="#FFC107" stroke-width="1.5"/>
    <path d="M165,436 l-4,3 l8,4 l-8,4 l8,4 l-8,4 l4,3" fill="none" stroke="#FFC107" stroke-width="1.5"/>
    <line x1="165" y1="458" x2="165" y2="464" stroke="#FFC107" stroke-width="1.5"/>
    <text x="180" y="450" font-size="8" fill="#9C27B0">4.7kΩ</text>
  </g>

  <!-- ================================================ -->
  <!--  DHT22 Sensor (on breadboard)                   -->
  <!-- ================================================ -->
  <g id="dht22">
    <rect x="250" y="325" width="120" height="100" rx="4" fill="#E3F2FD" stroke="#2196F3" stroke-width="2"/>
    <text x="310" y="345" text-anchor="middle" font-size="11" font-weight="bold" fill="#1565C0">DHT22</text>
    <text x="310" y="360" text-anchor="middle" font-size="9" fill="#2196F3">温湿度センサー</text>

    <!-- Pins (4-pin version) -->
    <text x="260" y="390" font-size="8" fill="#F44336">VCC</text>
    <text x="260" y="405" font-size="8" fill="#FFC107">DATA</text>
    <text x="260" y="420" font-size="8" fill="#9E9E9E">NC</text>
    <text x="350" y="390" text-anchor="end" font-size="8" fill="#212121">GND</text>

    <!-- 10kΩ Pullup Resistor Symbol -->
    <line x1="310" y1="430" x2="310" y2="436" stroke="#FFC107" stroke-width="1.5"/>
    <path d="M310,436 l-4,3 l8,4 l-8,4 l8,4 l-8,4 l4,3" fill="none" stroke="#FFC107" stroke-width="1.5"/>
    <line x1="310" y1="458" x2="310" y2="464" stroke="#FFC107" stroke-width="1.5"/>
    <text x="325" y="450" font-size="8" fill="#2196F3">10kΩ</text>
  </g>

  <!-- ================================================ -->
  <!--  Float Switch (on breadboard)                   -->
  <!-- ================================================ -->
  <g id="float-switch">
    <rect x="420" y="325" width="130" height="100" rx="4" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
    <text x="485" y="345" text-anchor="middle" font-size="11" font-weight="bold" fill="#2E7D32">フロートSW</text>
    <text x="485" y="360" text-anchor="middle" font-size="9" fill="#4CAF50">水位センサー</text>

    <!-- Switch Symbol -->
    <line x1="450" y1="385" x2="450" y2="400" stroke="#9C27B0" stroke-width="2"/>
    <line x1="450" y1="400" x2="480" y2="388" stroke="#9C27B0" stroke-width="2"/>
    <circle cx="483" cy="386" r="3" fill="none" stroke="#9C27B0" stroke-width="1.5"/>
    <line x1="486" y1="385" x2="520" y2="385" stroke="#212121" stroke-width="2"/>

    <text x="440" y="420" font-size="8" fill="#9C27B0">GPIO22</text>
    <text x="530" y="389" font-size="8" fill="#212121">GND</text>
    <text x="485" y="418" text-anchor="middle" font-size="7" fill="#888">(内蔵プルアップ)</text>
  </g>

  <!-- ================================================ -->
  <!--  WIRING CONNECTIONS                              -->
  <!-- ================================================ -->

  <!-- Power Rails from Pi -->
  <!-- 3.3V (Pin1) to breadboard + rail -->
  <polyline points="753,185 680,185 680,288 610,288" fill="none" stroke="#F44336" stroke-width="2.5"/>
  <text x="665" y="240" font-size="8" fill="#F44336" transform="rotate(-90,665,240)">3.3V</text>

  <!-- GND (Pin6) to breadboard - rail -->
  <polyline points="833,227 670,227 670,300 610,300" fill="none" stroke="#212121" stroke-width="2.5"/>
  <text x="655" y="265" font-size="8" fill="#666" transform="rotate(-90,655,265)">GND</text>

  <!-- GPIO4 (Pin7) to DS18B20 DATA -->
  <polyline points="753,248 640,248 640,412 200,412" fill="none" stroke="#FFC107" stroke-width="2"/>
  <text x="400" y="405" font-size="8" fill="#FFC107">GPIO4 (1-Wire)</text>

  <!-- GPIO17 (Pin11) to DHT22 DATA -->
  <polyline points="753,290 630,290 630,402 260,402" fill="none" stroke="#FFC107" stroke-width="2"/>
  <text x="450" y="395" font-size="8" fill="#FFC107">GPIO17</text>

  <!-- GPIO22 (Pin15) to Float Switch -->
  <polyline points="753,332 620,332 620,380 450,380" fill="none" stroke="#9C27B0" stroke-width="2"/>
  <text x="540" y="373" font-size="8" fill="#9C27B0">GPIO22</text>

  <!-- DS18B20 VCC from 3.3V rail -->
  <polyline points="180,397 195,397 195,288 100,288" fill="none" stroke="#F44336" stroke-width="1.5"/>
  <circle cx="100" cy="288" r="3" fill="#F44336"/>

  <!-- DS18B20 GND -->
  <polyline points="90,397 70,397 70,476 100,476" fill="none" stroke="#212121" stroke-width="1.5"/>
  <circle cx="100" cy="476" r="3" fill="#212121"/>

  <!-- DS18B20 pullup to 3.3V -->
  <polyline points="165,464 165,475 150,475 150,288 130,288" fill="none" stroke="#F44336" stroke-width="1" stroke-dasharray="3,2"/>
  <circle cx="130" cy="288" r="2" fill="#F44336"/>

  <!-- DHT22 VCC from 3.3V rail -->
  <polyline points="260,387 240,387 240,288 200,288" fill="none" stroke="#F44336" stroke-width="1.5"/>
  <circle cx="200" cy="288" r="3" fill="#F44336"/>

  <!-- DHT22 GND -->
  <polyline points="350,387 370,387 370,476 250,476" fill="none" stroke="#212121" stroke-width="1.5"/>
  <circle cx="250" cy="476" r="3" fill="#212121"/>

  <!-- DHT22 pullup to 3.3V -->
  <polyline points="310,464 310,475 290,475 290,288 270,288" fill="none" stroke="#F44336" stroke-width="1" stroke-dasharray="3,2"/>
  <circle cx="270" cy="288" r="2" fill="#F44336"/>

  <!-- Float switch GND -->
  <polyline points="520,382 540,382 540,476 400,476" fill="none" stroke="#212121" stroke-width="1.5"/>
  <circle cx="400" cy="476" r="3" fill="#212121"/>

  <!-- ================================================ -->
  <!--  LEGEND                                          -->
  <!-- ================================================ -->
  <g id="legend">
    <rect x="40" y="540" width="280" height="160" rx="6" fill="#FAFAFA" stroke="#E0E0E0" stroke-width="1"/>
    <text x="180" y="560" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">凡例（配線色）</text>

    <line x1="55" y1="585" x2="95" y2="585" stroke="#F44336" stroke-width="3"/>
    <text x="105" y="589" font-size="9" fill="#333">VCC (3.3V) - 赤</text>

    <line x1="55" y1="610" x2="95" y2="610" stroke="#212121" stroke-width="3"/>
    <text x="105" y="614" font-size="9" fill="#333">GND - 黒</text>

    <line x1="55" y1="635" x2="95" y2="635" stroke="#FFC107" stroke-width="3"/>
    <text x="105" y="639" font-size="9" fill="#333">データ線 - 黄</text>

    <line x1="55" y1="660" x2="95" y2="660" stroke="#9C27B0" stroke-width="3"/>
    <text x="105" y="664" font-size="9" fill="#333">GPIO入力 - 紫</text>

    <line x1="55" y1="685" x2="95" y2="685" stroke="#999" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="105" y="689" font-size="9" fill="#333">プルアップ（破線）</text>
  </g>

  <!-- ================================================ -->
  <!--  GPIO Usage Summary                              -->
  <!-- ================================================ -->
  <g id="pin-summary">
    <rect x="350" y="540" width="310" height="160" rx="4" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
    <text x="505" y="560" text-anchor="middle" font-size="10" font-weight="bold" fill="#333">Pi 4 使用ピン一覧 (Phase 2)</text>

    <text x="360" y="585" font-size="9" fill="#F44336" font-weight="bold">電源:</text>
    <text x="360" y="600" font-size="8" fill="#666">Pin 1 (3.3V): DHT22, DS18B20</text>
    <text x="360" y="615" font-size="8" fill="#666">Pin 6 (GND): 各センサー</text>

    <text x="360" y="640" font-size="9" fill="#FFC107" font-weight="bold">データ:</text>
    <text x="360" y="655" font-size="8" fill="#666">Pin 7 (GPIO4): DS18B20 (1-Wire)</text>
    <text x="360" y="670" font-size="8" fill="#666">Pin 11 (GPIO17): DHT22</text>

    <text x="360" y="695" font-size="9" fill="#9C27B0" font-weight="bold">GPIO入力:</text>
    <text x="510" y="695" font-size="8" fill="#666">Pin 15 (GPIO22): フロートSW</text>
  </g>

  <!-- ================================================ -->
  <!--  Phase 5 Note (pH sensor)                        -->
  <!-- ================================================ -->
  <g id="phase5-note">
    <rect x="700" y="620" width="380" height="70" rx="6" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
    <text x="890" y="645" text-anchor="middle" font-size="11" font-weight="bold" fill="#E65100">将来の拡張 (Phase 5)</text>
    <text x="890" y="665" text-anchor="middle" font-size="9" fill="#FF9800">pHセンサー + ADS1115 ADCモジュールを追加予定</text>
    <text x="890" y="680" text-anchor="middle" font-size="8" fill="#888">I2C接続（Pin 3: SDA, Pin 5: SCL）を使用</text>
  </g>

  <!-- ================================================ -->
  <!--  Notes                                           -->
  <!-- ================================================ -->
  <g id="notes">
    <rect x="40" y="80" width="620" height="80" rx="4" fill="#FFFDE7" stroke="#FFC107" stroke-width="1"/>
    <text x="50" y="100" font-size="10" font-weight="bold" fill="#F57F17">配線ノート</text>
    <text x="50" y="118" font-size="8" fill="#666">• DS18B20には4.7kΩプルアップ抵抗を接続（DATA-VCC間）— Phase 1から継続</text>
    <text x="50" y="133" font-size="8" fill="#666">• DHT22には10kΩプルアップ抵抗を接続（DATA-VCC間）</text>
    <text x="50" y="148" font-size="8" fill="#666">• フロートスイッチはソフトウェアプルアップ使用（GPIO22 INPUT_PULLUP）</text>
  </g>

</svg>
